import"../chunks/CWj6FrbW.js";import"../chunks/CzuHQAlO.js";import{a1 as ne,p as ce,a2 as h,a3 as ve,a4 as Y,a5 as de,f as g,a as ue,t as C,b as p,c as pe,a6 as E,K as c,i as e,e as _,j as d,s as o,d as i,r,n as _e}from"../chunks/D4HdPs5E.js";import{i as U}from"../chunks/Bw_0fAwL.js";import{e as ge,i as fe}from"../chunks/B7geMYGs.js";import{T as ke,s as A}from"../chunks/CygWUqY9.js";import{s as he}from"../chunks/WdiivfIN.js";import{i as me}from"../chunks/Dr98OFL6.js";import{b as m}from"../chunks/OJupb_Cg.js";import{A as xe}from"../chunks/adgz28Bh.js";import{D as be}from"../chunks/BajvWdd3.js";function ye(D,u){e(u).profile.loginGoogle(e(u))}function we(D,u,x){window.confirm("Are you sure you want to stay logged out? You might need to sync manually later")&&(e(u).profile.updateLoginStatus(void 0),d(x,e(u).profile.isAutomaticallyLoggedOut()))}var Ce=g('<a class="deck-card svelte-1kxuh58"><div class="left"><span class="deck-card-title svelte-1kxuh58"> </span> <span class="deck-card-subtitle svelte-1kxuh58"> </span></div> <div class="right svelte-1kxuh58"><span class="deck-count-learn-relearn svelte-1kxuh58" title="learning"> </span> <span class="deck-count-review svelte-1kxuh58" title="review"> </span> <span class="deck-count-new svelte-1kxuh58" title="new"> </span> <span class="deck-count-previously-studied svelte-1kxuh58" title="previously studied"> </span></div></a>'),Ae=g('<span class="update-circle svelte-1kxuh58"></span>'),De=g('<a class="a-button svelte-1kxuh58">Add New Deck</a>'),Le=g('<div class="deck-card-container svelte-1kxuh58"><!> <a class="deck-card-button svelte-1kxuh58" title="Deck Info" aria-label="Deck Info"><i class="fa-solid fa-list"></i></a></div>'),Se=g('<div class="deck-list-container svelte-1kxuh58"></div>'),Oe=g(`<div class="auto-logout-info-container svelte-1kxuh58"><div><i class="fa-solid fa-circle-info" style="color: #3E92CC;"></i> <p>You are <b>unexpectedly logged out</b> due to session expiration or server issue.
                    Try logging in again.</p> <p class="note svelte-1kxuh58">(*Please report to the developer if this happens frequently.)</p> <div><button class="button svelte-1kxuh58"><i class="fa-brands fa-google"></i>&nbsp;
                        Log in with Google</button> <button class="button invert svelte-1kxuh58"><i class="fa-solid fa-ban"></i>&nbsp;
                        Stay Logged Out</button></div></div></div>`),$e=g('<!> <div class="main-container svelte-1kxuh58"><div class="top-container svelte-1kxuh58"><a class="a-button svelte-1kxuh58" style="background-color: #A0D0F0;"><div style="display: flex; align-items: center; justify-content: space-between;"><span>Changelog</span> <span style="opacity: 0.4; font-weight: bold;"> </span></div> <!></a> <!></div> <div class="hr svelte-1kxuh58"></div> <!></div>',1);function Ye(D,u){ce(u,!1);const x=h(),b=h(),F=(t,a=_e)=>{var v=Ce(),l=i(v),n=i(l),f=i(n,!0);r(n);var k=o(n,2),$=i(k,!0);r(k),r(l);var q=o(l,2),W=i(q),ee=i(W,!0);r(W);var N=o(W,2),ae=i(N,!0);r(N);var j=o(N,2),te=i(j,!0);r(j);var R=o(j,2),se=i(R,!0);r(R),r(q),r(v),C((re,ie,oe,le)=>{A(v,"href",`${m??""}/overview?id=${a(),c(()=>a().id)??""}`),_(f,(a(),c(()=>a().title))),he(k,(a(),c(()=>`--subtitle-color: ${a().color??"#00000080"}`))),_($,(a(),c(()=>a().subtitle))),_(ee,re),_(ae,ie),_(te,oe),_(se,le)},[()=>(e(s),a(),c(()=>e(s).getLearningRelearningCardsCount(a().id)||"")),()=>(e(s),a(),c(()=>e(s).getScheduledReviewCardsCount(a().id)||"")),()=>(e(s),a(),c(()=>e(s).getScheduledNewOrWarmUpCardsCount(a().id)||"")),()=>(e(s),a(),c(()=>e(s).getScheduledPreviouslyStudiedCardsCount(a().id)||""))],E),p(t,v)};let s=h(new xe),y=h(!1),L=h(!1);ve(async()=>{await e(s).init(),d(s,e(s)),d(L,e(s).isNewUpdateExist()),I();const t=await e(s).initProfile();d(y,e(s).profile.isAutomaticallyLoggedOut()),t&&d(s,e(s)),d(L,e(s).isNewUpdateExist())});function I(){"serviceWorker"in navigator&&navigator.serviceWorker.register(`${m}/service-worker.js`).then(t=>{}).catch(t=>console.error("SW registration failed:",t))}function K(t){return be.find(a=>a.id===t)??{id:t,title:t,subtitle:""}}Y(()=>e(s),()=>{d(x,Object.keys(e(s).deckData))}),Y(()=>e(y),()=>{d(b,e(y))}),de(),me();var B=$e(),G=ue(B);ke(G,{title:"WenBun (beta)",noBack:!0});var P=o(G,2),S=i(P),w=i(S),O=i(w),T=o(i(O),2),M=i(T);r(T),r(O);var V=o(O,2);{var z=t=>{var a=Ae();p(t,a)};U(V,t=>{e(L)&&t(z)})}r(w);var H=o(w,2);{var J=t=>{var a=De();C(()=>A(a,"href",`${m??""}/deck-browser/`)),p(t,a)};U(H,t=>{e(b)||t(J)})}r(S);var Q=o(S,4);{var X=t=>{var a=Se();ge(a,5,()=>e(x),fe,(v,l)=>{var n=Le(),f=i(n),k=E(()=>(e(l),c(()=>K(e(l)))));F(f,()=>e(k));var $=o(f,2);r(n),C(()=>A($,"href",`${m??""}/deck?id=${e(l)??""}`)),p(v,n)}),r(a),p(t,a)},Z=t=>{var a=Oe(),v=i(a),l=o(i(v),6),n=i(l);n.__click=[ye,s];var f=o(n,2);f.__click=[we,s,y],r(l),r(v),r(a),p(t,a)};U(Q,t=>{e(b)?t(Z,!1):t(X)})}r(P),C(t=>{A(w,"href",`${m??""}/about/`),_(M,`v${t??""}`)},[()=>(e(s),c(()=>e(s).getCurrentAppVersion()))],E),p(D,B),pe()}ne(["click"]);export{Ye as component};
