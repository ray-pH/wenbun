import"../chunks/CWj6FrbW.js";import"../chunks/CzuHQAlO.js";import{a1 as sa,p as ia,a2 as w,a3 as ra,f as m,a as J,b as _,c as la,s as d,i as a,j as v,d as i,r as t,t as D,a7 as oa,e as $,a6 as ca}from"../chunks/D4HdPs5E.js";import{i as K}from"../chunks/Bw_0fAwL.js";import{e as N,i as O}from"../chunks/B7geMYGs.js";import{T as da,s as na}from"../chunks/CygWUqY9.js";import{s as va}from"../chunks/Ds6VENQq.js";import{s as fa}from"../chunks/WdiivfIN.js";import{b as pa}from"../chunks/DNYbrjcT.js";import{i as ua}from"../chunks/Dr98OFL6.js";import{b as _a}from"../chunks/OJupb_Cg.js";import{A as ma}from"../chunks/adgz28Bh.js";import{D as x,l as ka,a as ba}from"../chunks/BajvWdd3.js";import{S as ga}from"../chunks/Xahq3A07.js";var qa=(y,f,r)=>f(a(r)),ha=m("<option> </option>"),wa=m(`<div class="custom-deck-upload-container svelte-7ffq7u"><a class="button upload-deck-button svelte-7ffq7u"><i class="fa-solid fa-file-import"></i>&nbsp;
                    Upload custom deck</a></div>`),Da=(y,f,r)=>f(a(r).id),$a=m('<div class="deck-card-container svelte-7ffq7u"><div class="deck-card svelte-7ffq7u"><div class="left"><span class="deck-card-title svelte-7ffq7u"> </span> <span class="deck-card-subtitle svelte-7ffq7u"> </span></div> <div class="right svelte-7ffq7u"><span class="deck-card-count svelte-7ffq7u"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),xa=m('<div class="top-container svelte-7ffq7u"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-7ffq7u"><option></option><!></select></div></div> <!> <div class="deck-list-container svelte-7ffq7u"></div>',1),ya=m('<!> <div class="main-container svelte-7ffq7u"><!></div>',1);function Ga(y,f){ia(f,!1);let r=w(new ma),B=new ga,I=w(!1),p=w(""),C=w(x);ra(async()=>{await a(r).init(),L(),await a(r).initProfile()&&L()});async function L(){await Q(),v(r,a(r)),v(I,!0)}async function Q(){await Promise.allSettled(x.map(async s=>{const c=await ka(s.src??`${s.id}.txt`);c&&B.set(s.id,{cardCount:c.length})}))}async function R(s){await a(r).addDeckById(s),v(r,a(r))}function V(s){s.trim()?v(C,x.filter(c=>`${c.title} ${c.subtitle}`.toLowerCase().includes(s.toLowerCase()))):v(C,x)}ua();var S=ya(),F=J(S);da(F,{title:"Browse Decks"});var P=d(F,2),W=i(P);{var X=s=>{var c=xa(),k=J(c),T=i(k),b=d(i(T),2);D(()=>{a(p),oa(()=>{})}),b.__change=[qa,V,p];var A=i(b);A.value=A.__value="";var Y=d(A);N(Y,1,()=>ba,O,(l,e,n,g)=>{var o=ha(),u=i(o,!0);t(o);var q={};D(()=>{$(u,a(e)),q!==(q=a(e))&&(o.value=(o.__value=a(e))??"")}),_(l,o)}),t(b),t(T),t(k);var j=d(k,2);{var Z=l=>{var e=wa(),n=i(e);t(e),D(()=>na(n,"href",`${_a??""}/upload-custom-deck`)),_(l,e)};K(j,l=>{a(p).trim()===""&&l(Z)})}var U=d(j,2);N(U,5,()=>a(C),O,(l,e)=>{var n=$a(),g=i(n),o=i(g),u=i(o),q=i(u,!0);t(u);var M=d(u,2),aa=i(M,!0);t(M),t(o);var z=d(o,2),E=i(z),ea=i(E);t(E),t(z),t(g);var G=d(g,2);let H;G.__click=[Da,R,e],t(n),D((h,ta)=>{$(q,a(e).title),fa(M,`--subtitle-color: ${a(e).color??"#00000080"}`),$(aa,a(e).subtitle),$(ea,`${h??""} cards`),H=va(G,1,"deck-add-button svelte-7ffq7u",null,H,ta)},[()=>{var h;return((h=B.get(a(e).id))==null?void 0:h.cardCount)??0},()=>({invisible:a(r).decks.includes(a(e).id)})],ca),_(l,n)}),t(U),pa(b,()=>a(p),l=>v(p,l)),_(s,c)};K(W,s=>{a(I)&&s(X)})}t(P),_(y,S),la()}sa(["change","click"]);export{Ga as component};
